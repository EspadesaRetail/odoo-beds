<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <!-- Inherited Form and Search View for res.users -->
  <record model="ir.ui.view" id="inherited_view_users_form">
    <field name="name">Inherited Form view for Users Form</field>
    <field name="model">res.users</field>
    <field name="inherit_id" ref="base.view_users_form"/>
    <field name="arch" type="xml">

      <xpath expr="//page" position="after">
        <page string="Espadesa">
          <group>
            <field name='team'/>
            <field name='shop_role_ids' widget='many2many_tags'/>
            <field name='team_user_id' invisible='True'/>
          </group>
        </page>
      </xpath>

    </field>
  </record>

  <record id="inherited_view_users_search" model="ir.ui.view">
      <field name="name">Inherited Form view for Users Search</field>
      <field name="model">res.users</field>
      <field name="inherit_id" ref="base.view_users_search"/>
      <field name="arch" type="xml">

          <xpath expr="//filter[@name='Inactive']" position="after">
              <field name="team" string="Team"/>
              <field name="shop_role_ids" string="Shop Role"/>
              <separator/>
              <group expand="0" string="Group By">
                <filter string="Team" name="team" domain="[]" context="{'group_by':'team_id'}" />
                <filter string="Role" name="role_name" domain="[]" context="{'group_by':'role_name'}" />
              </group>
          </xpath>
      </field>
  </record>

  <!-- Views for User Teams -->
  <record id="res_users_team_form_view" model="ir.ui.view">
    <field name="name">Form view for Espadesa User Teams</field>
    <field name="model">res.users.team</field>
    <field name="arch" type="xml">
      <form string="Espadesa User Teams">
        <sheet>
          <div class="oe_title">
            <h1 class="o_row">
              Name:
              <field name="name"/>
            </h1>
          </div>
          <group>
            <field name="description"/>
          </group>
          <group>
            <field name="user_ids" readonly='1'/>
          </group>
        </sheet>
      </form>
    </field>
  </record>

  <record id="res_users_team_tree_view" model="ir.ui.view">
    <field name="name">Tree view for Espadesa User Teams</field>
    <field name="model">res.users.team</field>
    <field name="arch" type="xml">
      <tree string="Espadesa User Teams">
        <field name="team"/>
        <field name="name"/>
        <field name="description"/>
      </tree>
    </field>
  </record>

  <!-- Views for Shop Roles -->
  <record id="res_users_shop_role_form_view" model="ir.ui.view">
    <field name="name">Form view for Espadesa User Shop Roles</field>
    <field name="model">res.users.shop_role</field>
    <field name="arch" type="xml">
      <form string="Espadesa User Shop Roles">
        <sheet>
          <div class="oe_title">
            <h1 class="o_row">
              Name:
              <field name="name"/>
            </h1>
          </div>
          <group>
            <field name="description"/>
          </group>
          <group>
            <field name="user_ids" readonly='1'/>
          </group>
        </sheet>
      </form>
    </field>
  </record>

  <record id="res_users_shop_role_tree_view" model="ir.ui.view">
    <field name="name">Tree view for Espadesa User Shop Roles</field>
    <field name="model">res.users.shop_role</field>
    <field name="arch" type="xml">
      <tree string="Espadesa User Shop Roles">
        <field name="name"/>
        <field name="description"/>
      </tree>
    </field>
  </record>

  <!-- Actions and Menus -->
  <record model="ir.actions.act_window" id="action_res_users_team">
      <field name="name">Espadesa User Teams</field>
      <field name="res_model">res.users.team</field>
      <field name="view_mode">tree,form</field>
      <field name="view_id" ref="res_users_team_tree_view"/>
  </record>

  <record model="ir.actions.act_window" id="action_res_users_shop_role">
      <field name="name">Espadesa User Shop Roles</field>
      <field name="res_model">res.users.shop_role</field>
      <field name="view_mode">tree,form</field>
      <field name="view_id" ref="res_users_shop_role_tree_view"/>
  </record>

  <menuitem name="Espadesa Teams" id="menu_res_users_team" action="action_res_users_team" parent="base.menu_users" sequence="10"/>
  <menuitem name="Espadesa Shop Roles" id="menu_res_users_shop_role" action="action_res_users_shop_role" parent="base.menu_users" sequence="20"/>

</odoo>
