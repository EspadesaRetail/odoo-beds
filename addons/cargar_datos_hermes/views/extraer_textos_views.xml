<openerp>
  <data>

    <menuitem id="menu_base_extraer_textos" name="Limpiar TagsHtml" groups="base.group_sale_salesman" sequence="10"/>
    <menuitem id="sub_menu_extraer_textos" name="Limpiar textos" parent="menu_base_extraer_textos"/>

    <record id="action_limpieza_html_tree" model="ir.actions.act_window">
      <field name="name">Textos extraídos</field>
      <field name="res_model">limpieza.html</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
      <field name="help" type="html">
        <p class="oe_view_nocontent_create">
          Añade un nuevo texto
        </p>
        <p>
          ...
        </p>
      </field>
    </record>

    <menuitem id="limpiar_html_textos" name="Listado de textos" parent="sub_menu_extraer_textos" sequence="1" action="action_limpieza_html_tree"/>

    <!-- Vista en forma de listado "TREE" con el cual mostrar los campos que se han obtenido -->
    <record model="ir.ui.view" id="view_limpieza_html_tree">
      <field name="name">Extraer textos - Listado de textos</field>
      <field name="model">limpieza.html</field>
      <field name="arch" type="xml">
        <tree string="Listado de textos">
          <field name="modelo_origen"/>
          <field name="campo_origen"/>
          <field name="name"/>
          <field name="create_date"/>
        </tree>
      </field>
    </record>

    <!-- Añadimos un filtro de búsquedas -->
    <record id="view_limpieza_html_search" model="ir.ui.view">
      <field name="name">Extraer textos - Filtro de búsqueda</field>
      <field name="model">limpieza.html</field>
      <field name="arch" type="xml">
        <search>
          <field name="name"/>
          <field name="modelo_origen"/>
          <field name="campo_origen"/>
        </search>
      </field>
    </record>

    <!-- Vista para formatear un nuevo formulario más agradable a la vista -->
    <record model="ir.ui.view" id="view_limpieza_html_form">
      <field name="name">Extraer textos - Formulario</field>
      <field name="model">limpieza.html</field>
      <field name="arch" type="xml">
        <form string="Formulario">
          <sheet>
            <group colspan="2" cols="2">
              <separator string="Modelo de datos" colspan="2"/>
              <field name="modelo_origen"/>
              <field name="campo_origen"/>
              <separator string="Elemento" colspan="2"/>
              <field name="name"/>
              <field name="identificador_varios_1"/>
              <field name="identificador_varios_2"/>
              <field name="identificador_varios_3"/>
            </group>
            <notebook>
              <page string="Texto original">
                <field name="texto_original" nolabel="0"/>
              </page>
              <page string="Texto sin formato">
                <field name="texto_sin_html" nolabel="0"/>
              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <record id="action_tags_html_tree" model="ir.actions.act_window">
      <field name="name">Listado de Tags</field>
      <field name="res_model">tags.html</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
      <field name="help" type="html">
        <p class="oe_view_nocontent_create">
          Añade un nuevo Tipo de Tag a descartar de los textos
        </p>
      </field>
    </record>

    <menuitem id="tags_html_textos" name="Listado de tags" parent="sub_menu_extraer_textos" sequence="2" action="action_tags_html_tree"/>

    <!-- Vista en forma de listado "TREE" con el cual mostrar los tipos de incidencias -->
    <record model="ir.ui.view" id="view_tags_html_tree">
      <field name="name">Extraer textos - Listado de tags HTML a extraer</field>
      <field name="model">tags.html</field>
      <field name="arch" type="xml">
        <tree string="Listado de tags HTML a extraer">
          <field name="id"/>
          <field name="name"/>
        </tree>
      </field>
    </record>



    <!-- Extraer textos de modelos de datos -->
    <record id="process_text_limpieza_html" model="ir.ui.view">
        <field name="name">Extraer textos</field>
        <field name="model">process.texts.limpieza.html</field>
        <field name="arch" type="xml">
            <form string="Extraer textos del modelo de datos">
                <p class="oe_grey">
                    Proceso para extraer textos de un modelo de datos y un campo concreto

                </p>
                <field name="campo"></field>
                <footer>
                    <button name="procesar_textos" string="Extraer textos" type="object" class="beds-ws"/>
                    or
                    <button string="Close" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="action_process_text_limpieza_html" model="ir.actions.act_window">
        <field name="name">Extraer textos</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">process.texts.limpieza.html</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>

    <menuitem id="process_html_textos" parent="sub_menu_extraer_textos" action="action_process_text_limpieza_html" sequence="99"/>

  </data>
</openerp>
